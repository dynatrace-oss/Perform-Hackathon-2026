{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Vegas Casino - Observability Hackathon","text":"<p>Welcome to the Vegas Casino project documentation! This is a microservices-based casino application designed specifically for observability hackathons where attendees will improve instrumentation and application pipelines.</p>"},{"location":"#what-is-vegas-casino","title":"\ud83c\udfb0 What is Vegas Casino?","text":"<p>Vegas Casino is a comprehensive microservices application that simulates a real-world casino environment. It's built with multiple services using different programming languages and technologies, making it an ideal platform for:</p> <ul> <li>Observability Practice: Learn and implement distributed tracing, metrics, and logging</li> <li>Feature Flag Management: Experiment with OpenFeature and flagd for feature toggling</li> <li>Load Testing: Test application performance under various conditions</li> <li>DevOps Practices: Practice CI/CD, containerization, and Kubernetes deployment</li> </ul>"},{"location":"#quick-start","title":"\ud83d\ude80 Quick Start","text":"<pre><code># Build all Docker images\nmake docker-build-all\n\n# Deploy using Helm\nhelm install vegas-casino ./helm/vegas-casino\n\n# Run Playwright automation\nkubectl apply -f helm/vegas-casino/templates/playwright-deployment.yaml\n\n# Run k6 load tests\nkubectl apply -f helm/vegas-casino/templates/k6-deployment.yaml\n</code></pre>"},{"location":"#documentation-sections","title":"\ud83d\udcda Documentation Sections","text":"<ul> <li>Overview - Learn about the project and hackathon context</li> <li>Architecture - Understand the system design and components</li> <li>Development - Build and generate Docker images</li> <li>Testing - Playwright and k6 testing guides</li> <li>Deployment - Deploy to Kubernetes with Helm or manifests</li> </ul>"},{"location":"#key-features","title":"\ud83c\udfaf Key Features","text":"<ul> <li>Multi-Language Services: Node.js, Python, Go, and Java</li> <li>Feature Flags: OpenFeature with flagd sidecar injection</li> <li>Distributed Tracing: OpenTelemetry with gRPC export</li> <li>Load Testing: k6 and Playwright automation</li> <li>Observability: Comprehensive logging, metrics, and traces</li> </ul>"},{"location":"#technology-stack","title":"\ud83d\udee0\ufe0f Technology Stack","text":"<ul> <li>Frontend: Node.js/Express</li> <li>Game Services: Node.js, Python, Go</li> <li>Scoring Service: Java/Spring Boot</li> <li>Feature Flags: OpenFeature Operator + flagd</li> <li>Observability: OpenTelemetry</li> <li>Orchestration: Kubernetes + Helm</li> </ul> <p>Ready to get started? Check out the Project Overview or jump to Building the Project!</p>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#how-to-contribute","title":"How to Contribute","text":"<p>The Vegas Casino project welcomes contributions! Here's how you can help:</p>"},{"location":"contributing/#areas-for-improvement","title":"Areas for Improvement","text":""},{"location":"contributing/#instrumentation","title":"Instrumentation","text":"<ul> <li>Add missing OpenTelemetry spans</li> <li>Improve trace context propagation</li> <li>Add database operation spans</li> <li>Enhance span attributes</li> </ul>"},{"location":"contributing/#feature-flags","title":"Feature Flags","text":"<ul> <li>Add new feature flags</li> <li>Implement flag evaluation in services</li> <li>Create flag targeting rules</li> <li>Test flag variations</li> </ul>"},{"location":"contributing/#testing","title":"Testing","text":"<ul> <li>Create new Playwright scenarios</li> <li>Add k6 test cases</li> <li>Improve test coverage</li> <li>Add performance benchmarks</li> </ul>"},{"location":"contributing/#documentation","title":"Documentation","text":"<ul> <li>Improve documentation clarity</li> <li>Add examples and tutorials</li> <li>Fix typos and errors</li> <li>Add diagrams and visuals</li> </ul>"},{"location":"contributing/#development-workflow","title":"Development Workflow","text":"<ol> <li>Fork the Repository</li> <li>Create a Feature Branch <pre><code>git checkout -b feature/my-improvement\n</code></pre></li> <li>Make Changes</li> <li>Test Your Changes <pre><code>make docker-build-all\nmake test-all\n</code></pre></li> <li>Commit Changes <pre><code>git commit -m \"Add: description of changes\"\n</code></pre></li> <li>Push and Create Pull Request</li> </ol>"},{"location":"contributing/#code-style","title":"Code Style","text":"<ul> <li>Follow language-specific style guides</li> <li>Add comments for complex logic</li> <li>Include error handling</li> <li>Write meaningful commit messages</li> </ul>"},{"location":"contributing/#testing-requirements","title":"Testing Requirements","text":"<ul> <li>All new features should include tests</li> <li>Playwright tests for UI changes</li> <li>k6 tests for API changes</li> <li>Unit tests for service logic</li> </ul>"},{"location":"contributing/#documentation_1","title":"Documentation","text":"<ul> <li>Update relevant documentation</li> <li>Add examples for new features</li> <li>Keep architecture diagrams current</li> <li>Update deployment guides if needed</li> </ul>"},{"location":"contributing/#questions","title":"Questions?","text":"<p>Feel free to open an issue or start a discussion!</p> <p>Thank you for contributing to Vegas Casino! \ud83c\udfb0</p>"},{"location":"architecture/","title":"Architecture Overview","text":""},{"location":"architecture/#system-architecture","title":"System Architecture","text":"<p>Vegas Casino follows a microservices architecture with multiple independent services communicating via HTTP and gRPC protocols.</p> <pre><code>graph TB\n    Frontend[Frontend Service&lt;br/&gt;Node.js/Express&lt;br/&gt;Port: 3000]\n\n    Slots[Slots Service&lt;br/&gt;Node.js&lt;br/&gt;Ports: 8081, 50051]\n    Roulette[Roulette Service&lt;br/&gt;Python&lt;br/&gt;Ports: 8082, 50052]\n    Dice[Dice Service&lt;br/&gt;Go&lt;br/&gt;Ports: 8083, 50053]\n    Blackjack[Blackjack Service&lt;br/&gt;Node.js&lt;br/&gt;Ports: 8084, 50054]\n\n    Dashboard[Dashboard Service&lt;br/&gt;Node.js&lt;br/&gt;Port: 3001]\n    Scoring[Scoring Service&lt;br/&gt;Java/Spring Boot&lt;br/&gt;Port: 8085]\n\n    Redis[(Redis Cache&lt;br/&gt;State Store&lt;br/&gt;Port: 6379)]\n    PostgreSQL[(PostgreSQL&lt;br/&gt;Database&lt;br/&gt;Port: 5432)]\n\n    Frontend --&gt;|gRPC/HTTP| Slots\n    Frontend --&gt;|gRPC/HTTP| Roulette\n    Frontend --&gt;|gRPC/HTTP| Dice\n    Frontend --&gt;|gRPC/HTTP| Blackjack\n    Frontend --&gt;|HTTP| Dashboard\n\n    Slots --&gt; Redis\n    Roulette --&gt; Redis\n    Dice --&gt; Redis\n    Blackjack --&gt; Redis\n\n    Slots --&gt;|HTTP| Scoring\n    Roulette --&gt;|HTTP| Scoring\n    Dice --&gt;|HTTP| Scoring\n    Blackjack --&gt;|HTTP| Scoring\n\n    Dashboard --&gt;|HTTP| Scoring\n    Scoring --&gt; PostgreSQL\n\n    style Frontend fill:#9333ea,stroke:#7c3aed,color:#fff\n    style Dashboard fill:#9333ea,stroke:#7c3aed,color:#fff\n    style Slots fill:#06b6d4,stroke:#0891b2,color:#fff\n    style Roulette fill:#06b6d4,stroke:#0891b2,color:#fff\n    style Dice fill:#06b6d4,stroke:#0891b2,color:#fff\n    style Blackjack fill:#06b6d4,stroke:#0891b2,color:#fff\n    style Scoring fill:#dc2626,stroke:#b91c1c,color:#fff\n    style Redis fill:#f59e0b,stroke:#d97706,color:#fff\n    style PostgreSQL fill:#10b981,stroke:#059669,color:#fff</code></pre>"},{"location":"architecture/#service-communication","title":"Service Communication","text":""},{"location":"architecture/#http-communication","title":"HTTP Communication","text":"<ul> <li>Frontend \u2194 Game Services (fallback)</li> <li>Frontend \u2194 Dashboard Service</li> <li>Dashboard \u2194 Scoring Service</li> <li>Game Services \u2194 Scoring Service</li> </ul>"},{"location":"architecture/#grpc-communication","title":"gRPC Communication","text":"<ul> <li>Frontend \u2194 Game Services (primary)</li> <li>All services use gRPC for better performance and type safety</li> </ul>"},{"location":"architecture/#data-flow","title":"Data Flow","text":"<pre><code>sequenceDiagram\n    participant User\n    participant Frontend\n    participant Game as Game Service\n    participant Redis\n    participant Scoring\n    participant PostgreSQL\n    participant Dashboard\n\n    User-&gt;&gt;Frontend: User Action (Play Game)\n    Frontend-&gt;&gt;Game: gRPC Request\n    Game-&gt;&gt;Redis: Store Game State\n    Game-&gt;&gt;Game: Process Game Logic\n    Game-&gt;&gt;Redis: Update State\n    Game-&gt;&gt;Scoring: Record Game Result (HTTP)\n    Scoring-&gt;&gt;PostgreSQL: Persist Score\n    Game--&gt;&gt;Frontend: Game Response\n    Frontend--&gt;&gt;User: Display Result\n\n    User-&gt;&gt;Dashboard: View Statistics\n    Dashboard-&gt;&gt;Scoring: Query Stats (HTTP)\n    Scoring-&gt;&gt;PostgreSQL: Query Data\n    PostgreSQL--&gt;&gt;Scoring: Return Data\n    Scoring--&gt;&gt;Dashboard: Stats Response\n    Dashboard--&gt;&gt;User: Display Dashboard</code></pre>"},{"location":"architecture/#observability-stack","title":"Observability Stack","text":"<pre><code>graph LR\n    subgraph \"Application Services\"\n        Frontend[Frontend]\n        Game1[Game Services]\n        Scoring[Scoring]\n        Dashboard[Dashboard]\n    end\n\n    subgraph \"OpenTelemetry\"\n        OTEL[OTEL SDK&lt;br/&gt;Auto-instrumentation]\n        OTLP[OTLP Exporter&lt;br/&gt;gRPC]\n    end\n\n    subgraph \"Infrastructure\"\n        Collector[OTEL Collector&lt;br/&gt;Port: 4317]\n        Platform[Observability Platform&lt;br/&gt;Dynatrace/Other]\n    end\n\n    Frontend --&gt; OTEL\n    Game1 --&gt; OTEL\n    Scoring --&gt; OTEL\n    Dashboard --&gt; OTEL\n\n    OTEL --&gt; OTLP\n    OTLP --&gt;|gRPC| Collector\n    Collector --&gt; Platform\n\n    style OTEL fill:#06b6d4,stroke:#0891b2,color:#fff\n    style Collector fill:#9333ea,stroke:#7c3aed,color:#fff\n    style Platform fill:#10b981,stroke:#059669,color:#fff</code></pre> <ul> <li>OpenTelemetry: Distributed tracing and metrics</li> <li>OpenTelemetry Collector: Receives and exports telemetry data</li> <li>gRPC Exporter: Sends traces to collector on port 4317</li> <li>Trace Context Propagation: W3C Trace Context across all services</li> </ul>"},{"location":"architecture/#feature-flag-management","title":"Feature Flag Management","text":"<pre><code>graph TB\n    subgraph \"Kubernetes Cluster\"\n        subgraph \"OpenFeature Operator\"\n            Operator[Operator Controller]\n        end\n\n        subgraph \"Application Pod\"\n            Service[Application Service]\n            Flagd[flagd Sidecar&lt;br/&gt;Port: 8014]\n        end\n\n        CRD[FeatureFlag CRD&lt;br/&gt;Flag Definitions]\n        Source[FeatureFlagSource CRD&lt;br/&gt;Configuration]\n    end\n\n    Operator --&gt;|Watches| Service\n    Operator --&gt;|Injects| Flagd\n    Source --&gt;|Configures| Flagd\n    CRD --&gt;|Provides Flags| Flagd\n    Service --&gt;|localhost:8014| Flagd\n    Flagd --&gt;|Reads| CRD\n\n    style Operator fill:#dc2626,stroke:#b91c1c,color:#fff\n    style Flagd fill:#f59e0b,stroke:#d97706,color:#fff\n    style CRD fill:#10b981,stroke:#059669,color:#fff</code></pre> <ul> <li>OpenFeature Operator: Manages flagd sidecar injection</li> <li>flagd: Feature flag evaluation service (sidecar)</li> <li>FeatureFlagSource: Kubernetes CRD for flag configuration</li> <li>FeatureFlag: Kubernetes CRD for flag definitions</li> </ul> <p>Next: Learn about Components or the Technology Stack.</p>"},{"location":"architecture/components/","title":"Components","text":""},{"location":"architecture/components/#core-services","title":"Core Services","text":""},{"location":"architecture/components/#frontend-service","title":"Frontend Service","text":"<ul> <li>Language: Node.js/Express</li> <li>Port: 3000 (HTTP)</li> <li>Purpose: Web UI for players, game selection, balance management</li> <li>Key Features:</li> <li>User authentication and session management</li> <li>Game UI rendering</li> <li>Balance management</li> <li>gRPC client for game services</li> <li>Browser-side OpenTelemetry instrumentation</li> <li>Redis integration for balance caching</li> </ul>"},{"location":"architecture/components/#game-services","title":"Game Services","text":""},{"location":"architecture/components/#slots-service","title":"Slots Service","text":"<ul> <li>Language: Node.js</li> <li>Ports: 8081 (HTTP), 50051 (gRPC)</li> <li>Purpose: Slot machine game logic</li> <li>Features:</li> <li>Progressive jackpot support</li> <li>Bonus rounds</li> <li>Cheat detection (feature flag)</li> <li>Redis state management</li> </ul>"},{"location":"architecture/components/#roulette-service","title":"Roulette Service","text":"<ul> <li>Language: Python/Flask</li> <li>Ports: 8082 (HTTP), 50052 (gRPC)</li> <li>Purpose: European roulette game</li> <li>Features:</li> <li>Multiple bet types</li> <li>Live wheel simulation</li> <li>Cheat codes (feature flag)</li> <li>Redis state management</li> </ul>"},{"location":"architecture/components/#dice-service","title":"Dice Service","text":"<ul> <li>Language: Go</li> <li>Ports: 8083 (HTTP), 50053 (gRPC)</li> <li>Purpose: Craps/dice game</li> <li>Features:</li> <li>Pass-line and come bets</li> <li>Feature flag integration</li> <li>Redis state management</li> </ul>"},{"location":"architecture/components/#blackjack-service","title":"Blackjack Service","text":"<ul> <li>Language: Node.js</li> <li>Ports: 8084 (HTTP), 50054 (gRPC)</li> <li>Purpose: Blackjack card game</li> <li>Features:</li> <li>Double down, insurance, surrender</li> <li>Feature flag integration</li> <li>Redis state management</li> </ul>"},{"location":"architecture/components/#scoring-service","title":"Scoring Service","text":"<ul> <li>Language: Java/Spring Boot</li> <li>Port: 8085 (HTTP)</li> <li>Purpose: Game statistics, leaderboards, scoring</li> <li>Database: PostgreSQL</li> <li>Features:</li> <li>Player score tracking</li> <li>Game result storage</li> <li>Dashboard statistics</li> <li>Top players leaderboard</li> </ul>"},{"location":"architecture/components/#dashboard-service","title":"Dashboard Service","text":"<ul> <li>Language: Node.js/Express</li> <li>Port: 3001 (HTTP)</li> <li>Purpose: Analytics and reporting dashboard</li> <li>Features:</li> <li>Game statistics visualization</li> <li>Top players display</li> <li>Win/loss analytics</li> <li>Real-time data from scoring service</li> </ul>"},{"location":"architecture/components/#supporting-services","title":"Supporting Services","text":""},{"location":"architecture/components/#redis","title":"Redis","text":"<ul> <li>Purpose: Game state storage, session management, balance caching</li> <li>Port: 6379</li> <li>Usage: </li> <li>All game services use Redis for state persistence</li> <li>Frontend uses Redis for balance caching</li> <li>Stores game state during active sessions</li> <li>Configuration: Environment variables <code>REDIS_HOST</code>, <code>REDIS_PORT</code>, <code>REDIS_PASSWORD</code></li> </ul>"},{"location":"architecture/components/#postgresql","title":"PostgreSQL","text":"<ul> <li>Purpose: Persistent storage for scores and game results</li> <li>Port: 5432</li> <li>Schema: </li> <li><code>player_scores</code> table - Stores player leaderboard data</li> <li><code>game_results</code> table - Stores individual game results</li> <li>Configuration: Environment variables <code>DB_HOST</code>, <code>DB_PORT</code>, <code>DB_NAME</code>, <code>DB_USER</code>, <code>DB_PASSWORD</code></li> </ul>"},{"location":"architecture/components/#opentelemetry-collector","title":"OpenTelemetry Collector","text":"<ul> <li>Purpose: Receives telemetry data and exports to observability platform</li> <li>Port: 4317 (gRPC), 4318 (HTTP)</li> <li>Protocol: gRPC (primary)</li> </ul>"},{"location":"architecture/components/#feature-flag-infrastructure","title":"Feature Flag Infrastructure","text":""},{"location":"architecture/components/#openfeature-operator","title":"OpenFeature Operator","text":"<ul> <li>Purpose: Kubernetes operator for automatic flagd sidecar injection</li> <li>CRDs: </li> <li><code>FeatureFlagSource</code>: Links flagd to flag definitions</li> <li><code>FeatureFlag</code>: Defines feature flag configurations</li> <li>Installation: Must be installed before application deployment</li> </ul>"},{"location":"architecture/components/#flagd","title":"flagd","text":"<ul> <li>Purpose: Feature flag evaluation service (runs as sidecar)</li> <li>Port: 8014 (gRPC), 8015 (Management)</li> <li>Integration: Injected automatically by OpenFeature Operator</li> <li>Configuration: Via FeatureFlagSource CRD</li> <li>Language Support: </li> <li>Node.js: <code>@openfeature/flagd-provider</code></li> <li>Go: <code>github.com/open-feature/go-sdk-contrib/providers/flagd</code></li> <li>Python: <code>openfeature-flagd-provider</code> (if available)</li> </ul>"},{"location":"architecture/components/#testing-components","title":"Testing Components","text":""},{"location":"architecture/components/#playwright-automation","title":"Playwright Automation","text":"<ul> <li>Purpose: End-to-end user journey simulation</li> <li>Language: Node.js</li> <li>Features:</li> <li>User registration and login</li> <li>Game play simulation</li> <li>Feature flag interaction</li> <li>Dashboard verification</li> </ul>"},{"location":"architecture/components/#k6-load-testing","title":"k6 Load Testing","text":"<ul> <li>Purpose: Performance and load testing</li> <li>Language: JavaScript (k6)</li> <li>Features:</li> <li>Configurable virtual users</li> <li>Ramp-up and duration control</li> <li>Custom metrics</li> <li>Real-time performance monitoring</li> </ul>"},{"location":"architecture/components/#communication-patterns","title":"Communication Patterns","text":""},{"location":"architecture/components/#grpc-primary","title":"gRPC (Primary)","text":"<ul> <li>Frontend \u2192 Game Services</li> <li>Protocol Buffers for type safety</li> <li>Better performance than HTTP</li> </ul>"},{"location":"architecture/components/#http-fallbackapi","title":"HTTP (Fallback/API)","text":"<ul> <li>Frontend \u2192 Dashboard</li> <li>Dashboard \u2192 Scoring</li> <li>Game Services \u2192 Scoring</li> <li>RESTful API design</li> </ul>"},{"location":"architecture/components/#redis-pubsub-future","title":"Redis Pub/Sub (Future)","text":"<ul> <li>Real-time game events</li> <li>Notifications</li> </ul> <p>Next: Learn about the Technology Stack or start Building.</p>"},{"location":"architecture/technology/","title":"Technology Stack","text":""},{"location":"architecture/technology/#programming-languages","title":"Programming Languages","text":""},{"location":"architecture/technology/#nodejs-services","title":"Node.js Services","text":"<ul> <li>Frontend Service: Express.js web framework</li> <li>Slots Service: Node.js with gRPC</li> <li>Blackjack Service: Node.js with gRPC</li> <li>Dashboard Service: Express.js API server</li> <li>Version: Node.js 18+</li> </ul>"},{"location":"architecture/technology/#python-services","title":"Python Services","text":"<ul> <li>Roulette Service: Python 3.11+ with Flask</li> <li>gRPC: grpcio and grpcio-tools</li> <li>Dependencies: requirements.txt</li> </ul>"},{"location":"architecture/technology/#go-services","title":"Go Services","text":"<ul> <li>Dice Service: Go 1.21+</li> <li>gRPC: google.golang.org/grpc</li> <li>Modules: go.mod/go.sum</li> </ul>"},{"location":"architecture/technology/#java-services","title":"Java Services","text":"<ul> <li>Scoring Service: Java 17 with Spring Boot 3.2.0</li> <li>Build Tool: Maven</li> <li>Framework: Spring Data JPA</li> </ul>"},{"location":"architecture/technology/#observability-technologies","title":"Observability Technologies","text":""},{"location":"architecture/technology/#opentelemetry","title":"OpenTelemetry","text":"<ul> <li>Version: 1.31.0 (Java), Latest (Node.js/Python/Go)</li> <li>Protocol: gRPC (OTLP)</li> <li>Exporters: </li> <li><code>@opentelemetry/exporter-otlp-grpc</code> (Node.js)</li> <li><code>opentelemetry-exporter-otlp-proto-grpc</code> (Python)</li> <li><code>go.opentelemetry.io/otel/exporters/otlp/otlptrace/otlptracegrpc</code> (Go)</li> <li><code>opentelemetry-exporter-otlp</code> (Java)</li> <li>Instrumentation: Auto-instrumentation for HTTP, Express, gRPC, Fetch</li> </ul>"},{"location":"architecture/technology/#opentelemetry-collector","title":"OpenTelemetry Collector","text":"<ul> <li>Endpoint: <code>otel-collector.default.svc.cluster.local:4317</code></li> <li>Protocol: gRPC</li> <li>Purpose: Receives and forwards telemetry data</li> </ul>"},{"location":"architecture/technology/#feature-flag-technologies","title":"Feature Flag Technologies","text":""},{"location":"architecture/technology/#openfeature","title":"OpenFeature","text":"<ul> <li>SDK: <code>@openfeature/server-sdk</code> (Node.js)</li> <li>Provider: <code>@openfeature/flagd-provider</code></li> <li>Operator: OpenFeature Operator (Kubernetes)</li> </ul>"},{"location":"architecture/technology/#flagd","title":"flagd","text":"<ul> <li>Version: Latest (via OpenFeature Operator)</li> <li>Port: 8014 (gRPC), 8015 (Management)</li> <li>Protocol: gRPC</li> <li>Configuration: Kubernetes CRDs</li> </ul>"},{"location":"architecture/technology/#data-storage","title":"Data Storage","text":""},{"location":"architecture/technology/#redis","title":"Redis","text":"<ul> <li>Purpose: Game state, session cache, balance cache</li> <li>Client Libraries:</li> <li>Node.js: <code>redis</code> package</li> <li>Python: <code>redis-py</code></li> <li>Go: <code>github.com/redis/go-redis/v9</code></li> <li>Port: 6379</li> </ul>"},{"location":"architecture/technology/#postgresql","title":"PostgreSQL","text":"<ul> <li>Purpose: Persistent game results and scores</li> <li>Driver: </li> <li>Java: <code>org.postgresql:postgresql</code></li> <li>Spring Data JPA for ORM</li> <li>Port: 5432</li> <li>Schema: Managed by Hibernate DDL</li> </ul>"},{"location":"architecture/technology/#container-orchestration","title":"Container &amp; Orchestration","text":""},{"location":"architecture/technology/#docker","title":"Docker","text":"<ul> <li>Base Images:</li> <li>Node.js: <code>node:18-alpine</code></li> <li>Python: <code>python:3.11-slim</code></li> <li>Go: <code>golang:1.21-alpine</code></li> <li>Java: <code>eclipse-temurin:17-jre-alpine</code></li> <li>Playwright: <code>mcr.microsoft.com/playwright:v1.40.0-focal</code></li> <li>k6: <code>grafana/k6:latest</code></li> </ul>"},{"location":"architecture/technology/#kubernetes","title":"Kubernetes","text":"<ul> <li>API Version: v1</li> <li>Resources: Deployments, Services, Jobs, ConfigMaps, Secrets</li> <li>Gateway API: For ingress routing</li> </ul>"},{"location":"architecture/technology/#helm","title":"Helm","text":"<ul> <li>Version: 3.x</li> <li>Chart: <code>vegas-casino</code></li> <li>Dependencies: None (OpenFeature Operator installed separately)</li> </ul>"},{"location":"architecture/technology/#build-tools","title":"Build Tools","text":""},{"location":"architecture/technology/#make","title":"Make","text":"<ul> <li>Purpose: Build automation</li> <li>Targets: Docker build, push, testing</li> <li>Builder: Podman or Docker</li> </ul>"},{"location":"architecture/technology/#maven","title":"Maven","text":"<ul> <li>Purpose: Java/Spring Boot builds</li> <li>Version: 3.x</li> <li>Configuration: pom.xml</li> </ul>"},{"location":"architecture/technology/#npmyarn","title":"npm/yarn","text":"<ul> <li>Purpose: Node.js dependency management</li> <li>Files: package.json</li> </ul>"},{"location":"architecture/technology/#pip","title":"pip","text":"<ul> <li>Purpose: Python dependency management</li> <li>Files: requirements.txt</li> </ul>"},{"location":"architecture/technology/#go-mod","title":"go mod","text":"<ul> <li>Purpose: Go dependency management</li> <li>Files: go.mod, go.sum</li> </ul>"},{"location":"architecture/technology/#testing-tools","title":"Testing Tools","text":""},{"location":"architecture/technology/#playwright","title":"Playwright","text":"<ul> <li>Version: 1.40.0</li> <li>Purpose: Browser automation and E2E testing</li> <li>Browsers: Chromium (headless)</li> </ul>"},{"location":"architecture/technology/#k6","title":"k6","text":"<ul> <li>Version: Latest</li> <li>Purpose: Load and performance testing</li> <li>Metrics: Built-in + custom metrics</li> </ul>"},{"location":"architecture/technology/#development-tools","title":"Development Tools","text":""},{"location":"architecture/technology/#protocol-buffers","title":"Protocol Buffers","text":"<ul> <li>Purpose: gRPC service definitions</li> <li>Compiler: protoc</li> <li>Languages: Go, Python, Node.js</li> </ul>"},{"location":"architecture/technology/#git","title":"Git","text":"<ul> <li>Version Control: Git</li> <li>Workflow: Feature branches</li> </ul> <p>Next: Learn how to Build the Project or explore Testing.</p>"},{"location":"deployment/","title":"Deployment Overview","text":"<p>The Vegas Casino application can be deployed to Kubernetes using either:</p> <ol> <li>Helm Charts (Recommended) - Declarative, configurable deployment</li> <li>Kubernetes Manifests - Direct YAML files</li> </ol>"},{"location":"deployment/#prerequisites","title":"Prerequisites","text":"<p>Before deploying, ensure you have:</p> <ul> <li>\u2705 Kubernetes cluster (v1.24+)</li> <li>\u2705 kubectl configured</li> <li>\u2705 Helm 3.x installed (for Helm deployment)</li> <li>\u2705 OpenFeature Operator installed (required!)</li> <li>\u2705 Gateway API installed (for ingress)</li> <li>\u2705 Docker images built and pushed to registry</li> </ul>"},{"location":"deployment/#deployment-order","title":"Deployment Order","text":"<pre><code>flowchart TD\n    Start([Start Deployment]) --&gt; CheckPrereqs{Check Prerequisites}\n    CheckPrereqs --&gt;|Missing| InstallPrereqs[Install Prerequisites]\n    InstallPrereqs --&gt; InstallOF[1. Install OpenFeature Operator]\n    CheckPrereqs --&gt;|Ready| InstallOF\n\n    InstallOF --&gt; WaitOF[Wait for Operator Ready]\n    WaitOF --&gt; InstallGateway[2. Install Gateway API]\n    InstallGateway --&gt; DeployApp{Choose Deployment Method}\n\n    DeployApp --&gt;|Helm| HelmDeploy[3a. Deploy via Helm]\n    DeployApp --&gt;|Manifests| ManifestDeploy[3b. Deploy via Manifests]\n\n    HelmDeploy --&gt; Verify[4. Verify Deployment]\n    ManifestDeploy --&gt; Verify\n\n    Verify --&gt; CheckPods[Check Pods]\n    CheckPods --&gt; CheckServices[Check Services]\n    CheckServices --&gt; CheckGateway[Check Gateway]\n    CheckGateway --&gt; CheckFlags[Check Feature Flags]\n    CheckFlags --&gt; Complete([Deployment Complete])\n\n    style InstallOF fill:#dc2626,stroke:#b91c1c,color:#fff\n    style WaitOF fill:#f59e0b,stroke:#d97706,color:#fff\n    style Complete fill:#10b981,stroke:#059669,color:#fff</code></pre>"},{"location":"deployment/#1-install-openfeature-operator-required-first","title":"1. Install OpenFeature Operator (REQUIRED FIRST!)","text":"<p>\u26a0\ufe0f IMPORTANT: The OpenFeature Operator must be installed before deploying the application.</p> <pre><code># Install OpenFeature Operator\nhelm repo add openfeature https://open-feature.github.io/open-feature-operator\nhelm repo update\nhelm install open-feature-operator openfeature/open-feature-operator \\\n  --namespace open-feature-system \\\n  --create-namespace\n</code></pre> <p>Wait for operator to be ready: <pre><code>kubectl wait --for=condition=ready pod \\\n  -l control-plane=controller-manager \\\n  -n open-feature-system \\\n  --timeout=90s\n</code></pre></p>"},{"location":"deployment/#2-install-gateway-api-if-not-already-installed","title":"2. Install Gateway API (if not already installed)","text":"<pre><code># Install Gateway API CRDs\nkubectl apply -f https://github.com/kubernetes-sigs/gateway-api/releases/download/v1.0.0/standard-install.yaml\n</code></pre>"},{"location":"deployment/#3-deploy-application","title":"3. Deploy Application","text":"<p>Choose your deployment method: - Helm Charts (Recommended) - Kubernetes Manifests</p>"},{"location":"deployment/#post-deployment","title":"Post-Deployment","text":"<p>After deployment, verify:</p> <ol> <li> <p>Pods are running:    <pre><code>kubectl get pods -n vegas-casino\n</code></pre></p> </li> <li> <p>Services are available:    <pre><code>kubectl get svc -n vegas-casino\n</code></pre></p> </li> <li> <p>Gateway is accessible:    <pre><code>kubectl get gateway -n vegas-casino\nkubectl get httproute -n vegas-casino\n</code></pre></p> </li> <li> <p>OpenFeature resources:    <pre><code>kubectl get featureflag -n vegas-casino\nkubectl get featureflagsource -n vegas-casino\n</code></pre></p> </li> </ol>"},{"location":"deployment/#accessing-the-application","title":"Accessing the Application","text":""},{"location":"deployment/#via-gateway-external-ip","title":"Via Gateway External IP","text":"<pre><code># Get external IP\nkubectl get gateway vegas-casino-gateway -n vegas-casino -o jsonpath='{.status.addresses[0].value}'\n\n# Access frontend\ncurl http://&lt;EXTERNAL_IP&gt;/\n\n# Access dashboard\ncurl http://&lt;EXTERNAL_IP&gt;/dashboard\n</code></pre>"},{"location":"deployment/#via-port-forward-development","title":"Via Port Forward (Development)","text":"<pre><code># Forward frontend port\nkubectl port-forward -n vegas-casino svc/vegas-casino-frontend 3000:3000\n\n# Access at http://localhost:3000\n</code></pre>"},{"location":"deployment/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/#pods-not-starting","title":"Pods Not Starting","text":"<pre><code># Check pod status\nkubectl describe pod &lt;pod-name&gt; -n vegas-casino\n\n# Check logs\nkubectl logs &lt;pod-name&gt; -n vegas-casino\n</code></pre>"},{"location":"deployment/#openfeature-issues","title":"OpenFeature Issues","text":"<pre><code># Verify operator is running\nkubectl get pods -n open-feature-system\n\n# Check FeatureFlagSource\nkubectl describe featureflagsource -n vegas-casino\n\n# Check flagd sidecars\nkubectl get pods -n vegas-casino -o jsonpath='{.items[*].spec.containers[*].name}'\n</code></pre>"},{"location":"deployment/#service-connectivity","title":"Service Connectivity","text":"<pre><code># Test service connectivity\nkubectl run -it --rm debug --image=curlimages/curl --restart=Never -- \\\n  curl http://vegas-casino-frontend:3000/health\n</code></pre> <p>Next: Learn about Helm Deployment or Kubernetes Manifests.</p>"},{"location":"deployment/helm/","title":"Helm Deployment","text":""},{"location":"deployment/helm/#overview","title":"Overview","text":"<p>Helm is the recommended way to deploy the Vegas Casino application. It provides:</p> <ul> <li>\u2705 Configuration management via values.yaml</li> <li>\u2705 Template-based resource generation</li> <li>\u2705 Dependency management</li> <li>\u2705 Easy upgrades and rollbacks</li> </ul>"},{"location":"deployment/helm/#prerequisites","title":"Prerequisites","text":"<ol> <li>Helm 3.x installed</li> <li>OpenFeature Operator installed (see OpenFeature Operator)</li> <li>Gateway API installed</li> <li>Docker images built and available</li> </ol>"},{"location":"deployment/helm/#quick-start","title":"Quick Start","text":"<pre><code># Install with default values\nhelm install vegas-casino ./helm/vegas-casino\n\n# Or with custom values\nhelm install vegas-casino ./helm/vegas-casino \\\n  --set global.imageTag=0.10 \\\n  --set frontend.replicaCount=2\n</code></pre>"},{"location":"deployment/helm/#configuration","title":"Configuration","text":""},{"location":"deployment/helm/#key-values","title":"Key Values","text":"<p>Edit <code>helm/vegas-casino/values.yaml</code> or use <code>--set</code> flags:</p> <pre><code>global:\n  imageRegistry: hrexed/vegasapp\n  imageTag: \"0.10\"\n  namespace: vegas-casino\n\nfrontend:\n  enabled: true\n  replicaCount: 2\n\nopentelemetry:\n  enabled: true\n  exporter:\n    endpoint: \"otel-collector.default.svc.cluster.local:4317\"\n    protocol: \"grpc\"\n\nopenfeature:\n  enabled: true\n</code></pre>"},{"location":"deployment/helm/#custom-values-file","title":"Custom Values File","text":"<p>Create <code>my-values.yaml</code>:</p> <pre><code>global:\n  imageTag: \"0.11\"\n\nfrontend:\n  replicaCount: 3\n\nplaywright:\n  enabled: true\n  runContinuously: \"true\"\n\nk6:\n  enabled: true\n  vus: \"50\"\n  duration: \"30m\"\n</code></pre> <p>Deploy with custom values: <pre><code>helm install vegas-casino ./helm/vegas-casino -f my-values.yaml\n</code></pre></p>"},{"location":"deployment/helm/#deployment-steps","title":"Deployment Steps","text":""},{"location":"deployment/helm/#1-install-openfeature-operator","title":"1. Install OpenFeature Operator","text":"<p>\u26a0\ufe0f CRITICAL: Must be done first!</p> <pre><code>helm repo add openfeature https://open-feature.github.io/open-feature-operator\nhelm repo update\nhelm install open-feature-operator openfeature/open-feature-operator \\\n  --namespace open-feature-system \\\n  --create-namespace\n</code></pre>"},{"location":"deployment/helm/#2-deploy-application","title":"2. Deploy Application","text":"<pre><code># Install\nhelm install vegas-casino ./helm/vegas-casino\n\n# Or upgrade if already installed\nhelm upgrade vegas-casino ./helm/vegas-casino\n</code></pre>"},{"location":"deployment/helm/#3-verify-deployment","title":"3. Verify Deployment","text":"<pre><code># Check release status\nhelm status vegas-casino\n\n# List all resources\nhelm get manifest vegas-casino\n\n# Check pods\nkubectl get pods -n vegas-casino\n</code></pre>"},{"location":"deployment/helm/#common-operations","title":"Common Operations","text":""},{"location":"deployment/helm/#upgrade-deployment","title":"Upgrade Deployment","text":"<pre><code># Upgrade with new image tag\nhelm upgrade vegas-casino ./helm/vegas-casino \\\n  --set global.imageTag=0.11\n\n# Upgrade with values file\nhelm upgrade vegas-casino ./helm/vegas-casino -f my-values.yaml\n</code></pre>"},{"location":"deployment/helm/#rollback","title":"Rollback","text":"<pre><code># List revisions\nhelm history vegas-casino\n\n# Rollback to previous version\nhelm rollback vegas-casino\n\n# Rollback to specific revision\nhelm rollback vegas-casino 2\n</code></pre>"},{"location":"deployment/helm/#uninstall","title":"Uninstall","text":"<pre><code># Uninstall release\nhelm uninstall vegas-casino\n\n# Note: This does NOT uninstall OpenFeature Operator\n</code></pre>"},{"location":"deployment/helm/#configuration-examples","title":"Configuration Examples","text":""},{"location":"deployment/helm/#enable-all-services","title":"Enable All Services","text":"<pre><code>frontend:\n  enabled: true\nslots:\n  enabled: true\nroulette:\n  enabled: true\ndice:\n  enabled: true\nblackjack:\n  enabled: true\nscoring:\n  enabled: true\ndashboard:\n  enabled: true\nredis:\n  enabled: true\npostgresql:\n  enabled: true\n</code></pre>"},{"location":"deployment/helm/#configure-resource-limits","title":"Configure Resource Limits","text":"<pre><code>frontend:\n  resources:\n    requests:\n      memory: \"512Mi\"\n      cpu: \"200m\"\n    limits:\n      memory: \"1Gi\"\n      cpu: \"500m\"\n</code></pre>"},{"location":"deployment/helm/#configure-feature-flags","title":"Configure Feature Flags","text":"<pre><code>openfeature:\n  enabled: true\n\nflagd:\n  slots:\n    \"progressive-jackpot\":\n      state: \"ENABLED\"\n      defaultVariant: \"true\"\n  roulette:\n    \"cheat-detection\":\n      state: \"ENABLED\"\n      defaultVariant: \"true\"\n</code></pre>"},{"location":"deployment/helm/#external-database","title":"External Database","text":"<pre><code>postgresql:\n  enabled: false  # Use external database\n\nscoring:\n  env:\n    DB_HOST: \"external-postgres.example.com\"\n    DB_PORT: \"5432\"\n    DB_NAME: \"vegas_casino\"\n    DB_USER: \"vegas_user\"\n    DB_PASSWORD: \"password\"\n</code></pre>"},{"location":"deployment/helm/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/helm/#release-stuck","title":"Release Stuck","text":"<pre><code># Check release status\nhelm status vegas-casino\n\n# Force delete (if needed)\nhelm uninstall vegas-casino --no-hooks\n</code></pre>"},{"location":"deployment/helm/#resources-not-created","title":"Resources Not Created","text":"<pre><code># Check if values are correct\nhelm template vegas-casino ./helm/vegas-casino\n\n# Dry-run to see what would be created\nhelm install vegas-casino ./helm/vegas-casino --dry-run --debug\n</code></pre>"},{"location":"deployment/helm/#image-pull-errors","title":"Image Pull Errors","text":"<pre><code># Verify image exists\ndocker pull hrexed/vegasapp-frontend:0.10\n\n# Check image pull secrets\nkubectl get secrets -n vegas-casino\n</code></pre> <p>Next: Learn about Kubernetes Manifests or OpenFeature Operator.</p>"},{"location":"deployment/manifests/","title":"Kubernetes Manifests","text":""},{"location":"deployment/manifests/#overview","title":"Overview","text":"<p>You can deploy the Vegas Casino application using raw Kubernetes manifests instead of Helm. This gives you full control over the resources but requires manual management.</p>"},{"location":"deployment/manifests/#prerequisites","title":"Prerequisites","text":"<ol> <li>kubectl configured</li> <li>OpenFeature Operator installed (see OpenFeature Operator)</li> <li>Gateway API installed</li> <li>Docker images built and available</li> </ol>"},{"location":"deployment/manifests/#deployment-order","title":"Deployment Order","text":""},{"location":"deployment/manifests/#1-install-openfeature-operator-required-first","title":"1. Install OpenFeature Operator (REQUIRED FIRST!)","text":"<p>\u26a0\ufe0f IMPORTANT: Must be installed before application deployment.</p> <pre><code>helm repo add openfeature https://open-feature.github.io/open-feature-operator\nhelm install open-feature-operator openfeature/open-feature-operator \\\n  --namespace open-feature-system \\\n  --create-namespace\n</code></pre>"},{"location":"deployment/manifests/#2-create-namespace","title":"2. Create Namespace","text":"<pre><code>kubectl create namespace vegas-casino\n</code></pre>"},{"location":"deployment/manifests/#3-deploy-resources","title":"3. Deploy Resources","text":"<p>Deploy in this order:</p> <pre><code># 1. ConfigMaps and Secrets\nkubectl apply -f helm/vegas-casino/templates/configmap.yaml\nkubectl apply -f helm/vegas-casino/templates/secret.yaml\n\n# 2. Feature Flags (requires OpenFeature Operator)\nkubectl apply -f helm/vegas-casino/templates/featureflag.yaml\nkubectl apply -f helm/vegas-casino/templates/featureflagsource.yaml\n\n# 3. Database (if enabled)\nkubectl apply -f helm/vegas-casino/templates/postgresql-deployment.yaml\nkubectl apply -f helm/vegas-casino/templates/postgresql-service.yaml\n\n# 4. Redis (if enabled)\nkubectl apply -f helm/vegas-casino/templates/redis-deployment.yaml\nkubectl apply -f helm/vegas-casino/templates/redis-service.yaml\n\n# 5. Application Services\nkubectl apply -f helm/vegas-casino/templates/frontend-deployment.yaml\nkubectl apply -f helm/vegas-casino/templates/frontend-service.yaml\nkubectl apply -f helm/vegas-casino/templates/slots-deployment.yaml\nkubectl apply -f helm/vegas-casino/templates/slots-service.yaml\n# ... repeat for other services\n\n# 6. Gateway API\nkubectl apply -f helm/vegas-casino/templates/gateway.yaml\nkubectl apply -f helm/vegas-casino/templates/httproute.yaml\n</code></pre>"},{"location":"deployment/manifests/#using-helm-template","title":"Using Helm Template","text":"<p>Instead of manually applying, you can use Helm to generate manifests:</p> <pre><code># Generate all manifests\nhelm template vegas-casino ./helm/vegas-casino &gt; manifests.yaml\n\n# Apply generated manifests\nkubectl apply -f manifests.yaml\n</code></pre>"},{"location":"deployment/manifests/#customizing-manifests","title":"Customizing Manifests","text":""},{"location":"deployment/manifests/#edit-generated-manifests","title":"Edit Generated Manifests","text":"<pre><code># Generate manifests\nhelm template vegas-casino ./helm/vegas-casino &gt; manifests.yaml\n\n# Edit manifests.yaml\nvim manifests.yaml\n\n# Apply\nkubectl apply -f manifests.yaml\n</code></pre>"},{"location":"deployment/manifests/#manual-manifest-creation","title":"Manual Manifest Creation","text":"<p>Create custom manifests based on templates:</p> <pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: vegas-casino-frontend\n  namespace: vegas-casino\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: frontend\n  template:\n    metadata:\n      labels:\n        app: frontend\n    spec:\n      containers:\n      - name: frontend\n        image: hrexed/vegasapp-frontend:0.10\n        ports:\n        - containerPort: 3000\n        env:\n        - name: CASINO_URL\n          value: \"http://vegas-casino-frontend:3000\"\n</code></pre>"},{"location":"deployment/manifests/#verification","title":"Verification","text":"<pre><code># Check all resources\nkubectl get all -n vegas-casino\n\n# Check deployments\nkubectl get deployments -n vegas-casino\n\n# Check services\nkubectl get services -n vegas-casino\n\n# Check pods\nkubectl get pods -n vegas-casino\n\n# Check logs\nkubectl logs -n vegas-casino deployment/vegas-casino-frontend\n</code></pre>"},{"location":"deployment/manifests/#updating-manifests","title":"Updating Manifests","text":""},{"location":"deployment/manifests/#update-image","title":"Update Image","text":"<pre><code># Set new image\nkubectl set image deployment/vegas-casino-frontend \\\n  frontend=hrexed/vegasapp-frontend:0.11 \\\n  -n vegas-casino\n\n# Or edit deployment\nkubectl edit deployment vegas-casino-frontend -n vegas-casino\n</code></pre>"},{"location":"deployment/manifests/#scale-services","title":"Scale Services","text":"<pre><code># Scale frontend\nkubectl scale deployment vegas-casino-frontend --replicas=3 -n vegas-casino\n</code></pre>"},{"location":"deployment/manifests/#update-environment-variables","title":"Update Environment Variables","text":"<pre><code># Set env var\nkubectl set env deployment/vegas-casino-frontend \\\n  OTEL_EXPORTER_OTLP_ENDPOINT=otel-collector:4317 \\\n  -n vegas-casino\n</code></pre>"},{"location":"deployment/manifests/#cleanup","title":"Cleanup","text":"<pre><code># Delete all resources\nkubectl delete namespace vegas-casino\n\n# Or delete individual resources\nkubectl delete deployment vegas-casino-frontend -n vegas-casino\nkubectl delete service vegas-casino-frontend -n vegas-casino\n</code></pre>"},{"location":"deployment/manifests/#advantages-of-manifests","title":"Advantages of Manifests","text":"<ul> <li>\u2705 Full control over resources</li> <li>\u2705 No Helm dependency</li> <li>\u2705 Easy to version control</li> <li>\u2705 Direct kubectl operations</li> </ul>"},{"location":"deployment/manifests/#disadvantages","title":"Disadvantages","text":"<ul> <li>\u274c Manual configuration management</li> <li>\u274c No templating</li> <li>\u274c Harder to maintain</li> <li>\u274c No rollback support</li> </ul> <p>Next: Learn about OpenFeature Operator or return to Deployment Overview.</p>"},{"location":"deployment/openfeature/","title":"OpenFeature Operator","text":""},{"location":"deployment/openfeature/#critical-install-before-application","title":"\u26a0\ufe0f CRITICAL: Install Before Application","text":"<p>The OpenFeature Operator must be installed BEFORE deploying the Vegas Casino application. The operator manages the flagd sidecar injection and FeatureFlag CRDs.</p>"},{"location":"deployment/openfeature/#why-openfeature-operator","title":"Why OpenFeature Operator?","text":"<p>The OpenFeature Operator provides:</p> <ul> <li>\u2705 Automatic flagd sidecar injection - No manual configuration needed</li> <li>\u2705 Kubernetes-native feature flags - CRDs for flag management</li> <li>\u2705 Centralized configuration - Manage flags via Kubernetes resources</li> <li>\u2705 Dynamic updates - Change flags without redeploying services</li> </ul>"},{"location":"deployment/openfeature/#installation","title":"Installation","text":""},{"location":"deployment/openfeature/#step-1-add-helm-repository","title":"Step 1: Add Helm Repository","text":"<pre><code>helm repo add openfeature https://open-feature.github.io/open-feature-operator\nhelm repo update\n</code></pre>"},{"location":"deployment/openfeature/#step-2-install-operator","title":"Step 2: Install Operator","text":"<pre><code>helm install open-feature-operator openfeature/open-feature-operator \\\n  --namespace open-feature-system \\\n  --create-namespace \\\n  --wait\n</code></pre>"},{"location":"deployment/openfeature/#step-3-verify-installation","title":"Step 3: Verify Installation","text":"<pre><code># Check operator pod\nkubectl get pods -n open-feature-system\n\n# Verify CRDs are installed\nkubectl get crd | grep openfeature\n\n# Should see:\n# - featureflags.core.openfeature.dev\n# - featureflagsources.core.openfeature.dev\n</code></pre>"},{"location":"deployment/openfeature/#operator-components","title":"Operator Components","text":""},{"location":"deployment/openfeature/#featureflag-crd","title":"FeatureFlag CRD","text":"<p>Defines feature flag configurations:</p> <pre><code>apiVersion: core.openfeature.dev/v1beta1\nkind: FeatureFlag\nmetadata:\n  name: vegas-casino-flags\nspec:\n  flagSpec:\n    flags:\n      \"slots.progressive-jackpot\":\n        state: ENABLED\n        defaultVariant: \"true\"\n        variants:\n          \"true\": true\n          \"false\": false\n</code></pre>"},{"location":"deployment/openfeature/#featureflagsource-crd","title":"FeatureFlagSource CRD","text":"<p>Links flagd sidecar to flag definitions:</p> <pre><code>apiVersion: core.openfeature.dev/v1beta1\nkind: FeatureFlagSource\nmetadata:\n  name: vegas-casino-flag-source\nspec:\n  sources:\n    - source: vegas-casino/vegas-casino-flags\n      provider: kubernetes\n  port: 8014\n  managementPort: 8015\n</code></pre>"},{"location":"deployment/openfeature/#how-it-works","title":"How It Works","text":"<pre><code>sequenceDiagram\n    participant Admin\n    participant K8s as Kubernetes API\n    participant Operator as OpenFeature Operator\n    participant Pod as Application Pod\n    participant Flagd as flagd Sidecar\n    participant Service as Application Service\n    participant CRD as FeatureFlag CRD\n\n    Admin-&gt;&gt;K8s: Create FeatureFlag CRD\n    K8s-&gt;&gt;CRD: Store Flag Definitions\n\n    Admin-&gt;&gt;K8s: Deploy Pod with OpenFeature Annotations\n    K8s-&gt;&gt;Operator: Pod Created Event\n    Operator-&gt;&gt;Operator: Detect OpenFeature Annotations\n    Operator-&gt;&gt;Pod: Inject flagd Sidecar\n    Operator-&gt;&gt;Flagd: Configure to use FeatureFlag CRD\n    Flagd-&gt;&gt;CRD: Watch for Flag Changes\n\n    Service-&gt;&gt;Flagd: Evaluate Flag (localhost:8014)\n    Flagd-&gt;&gt;CRD: Read Flag Value\n    CRD--&gt;&gt;Flagd: Return Flag Value\n    Flagd--&gt;&gt;Service: Return Evaluation Result\n\n    Admin-&gt;&gt;CRD: Update Flag Value\n    CRD-&gt;&gt;Flagd: Notify Change\n    Flagd-&gt;&gt;Flagd: Reload Configuration</code></pre> <ol> <li>Operator watches for pods with OpenFeature annotations</li> <li>Injects flagd sidecar automatically</li> <li>Configures flagd to connect to FeatureFlag resources</li> <li>Services connect to flagd via <code>localhost:8014</code></li> </ol>"},{"location":"deployment/openfeature/#pod-annotations","title":"Pod Annotations","text":"<p>Services need these annotations for sidecar injection:</p> <pre><code>annotations:\n  openfeature.dev/enabled: \"true\"\n  openfeature.dev/featureflagsource: \"vegas-casino/vegas-casino-flag-source\"\n</code></pre>"},{"location":"deployment/openfeature/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/openfeature/#operator-not-running","title":"Operator Not Running","text":"<pre><code># Check operator status\nkubectl get pods -n open-feature-system\n\n# Check operator logs\nkubectl logs -n open-feature-system \\\n  -l control-plane=controller-manager\n</code></pre>"},{"location":"deployment/openfeature/#sidecar-not-injected","title":"Sidecar Not Injected","text":"<pre><code># Check pod annotations\nkubectl describe pod &lt;pod-name&gt; -n vegas-casino\n\n# Verify FeatureFlagSource exists\nkubectl get featureflagsource -n vegas-casino\n\n# Check flagd sidecar\nkubectl get pod &lt;pod-name&gt; -n vegas-casino -o jsonpath='{.spec.containers[*].name}'\n# Should include 'flagd'\n</code></pre>"},{"location":"deployment/openfeature/#flags-not-loading","title":"Flags Not Loading","text":"<pre><code># Check FeatureFlag resource\nkubectl get featureflag -n vegas-casino\nkubectl describe featureflag vegas-casino-flags -n vegas-casino\n\n# Check flagd logs\nkubectl logs &lt;pod-name&gt; -c flagd -n vegas-casino\n</code></pre>"},{"location":"deployment/openfeature/#port-conflicts","title":"Port Conflicts","text":"<p>If you see port conflicts:</p> <pre><code># In FeatureFlagSource, ensure ports are different\nspec:\n  port: 8014        # gRPC port\n  managementPort: 8015  # Management port (must be different)\n</code></pre>"},{"location":"deployment/openfeature/#updating-flags","title":"Updating Flags","text":""},{"location":"deployment/openfeature/#update-featureflag","title":"Update FeatureFlag","text":"<pre><code># Edit FeatureFlag\nkubectl edit featureflag vegas-casino-flags -n vegas-casino\n\n# Or apply new version\nkubectl apply -f helm/vegas-casino/templates/featureflag.yaml\n</code></pre>"},{"location":"deployment/openfeature/#verify-flag-updates","title":"Verify Flag Updates","text":"<pre><code># Check flagd logs for reload\nkubectl logs &lt;pod-name&gt; -c flagd -n vegas-casino | grep \"flag updated\"\n</code></pre>"},{"location":"deployment/openfeature/#uninstalling","title":"Uninstalling","text":"<p>\u26a0\ufe0f WARNING: Uninstalling the operator will break feature flags!</p> <pre><code># Uninstall operator\nhelm uninstall open-feature-operator -n open-feature-system\n\n# Note: This will NOT remove CRDs\n# To remove CRDs:\nkubectl delete crd featureflags.core.openfeature.dev\nkubectl delete crd featureflagsources.core.openfeature.dev\n</code></pre>"},{"location":"deployment/openfeature/#best-practices","title":"Best Practices","text":"<ol> <li>Install First: Always install operator before application</li> <li>Namespace: Use dedicated namespace for operator</li> <li>Version Pinning: Pin operator version for stability</li> <li>Resource Limits: Set appropriate limits for operator</li> <li>Monitoring: Monitor operator health and flagd sidecars</li> </ol>"},{"location":"deployment/openfeature/#additional-resources","title":"Additional Resources","text":"<ul> <li>OpenFeature Operator Documentation</li> <li>flagd Documentation</li> <li>Feature Flag Best Practices</li> </ul> <p>Next: Return to Deployment Overview or Helm Deployment.</p>"},{"location":"development/building/","title":"Building the Project","text":""},{"location":"development/building/#prerequisites","title":"Prerequisites","text":"<p>Before building the project, ensure you have:</p> <ul> <li>Docker or Podman installed</li> <li>Make installed</li> <li>Access to container registry (optional, for pushing images)</li> </ul>"},{"location":"development/building/#build-configuration","title":"Build Configuration","text":"<p>The project uses a <code>Makefile</code> for build automation. Key configuration variables:</p> <pre><code>REGISTRY ?= hrexed/vegasapp\nIMAGE_TAG ?= 0.10\nBUILDER ?= podman  # or docker\nPLATFORM ?= linux/amd64\n</code></pre>"},{"location":"development/building/#building-individual-services","title":"Building Individual Services","text":""},{"location":"development/building/#build-frontend-service","title":"Build Frontend Service","text":"<pre><code>make docker-build-frontend\n</code></pre>"},{"location":"development/building/#build-game-services","title":"Build Game Services","text":"<pre><code>make docker-build-slots\nmake docker-build-roulette\nmake docker-build-dice\nmake docker-build-blackjack\n</code></pre>"},{"location":"development/building/#build-supporting-services","title":"Build Supporting Services","text":"<pre><code>make docker-build-scoring    # Java/Spring Boot\nmake docker-build-dashboard  # Node.js\nmake docker-build-playwright # Automation\nmake docker-build-k6         # Load testing\n</code></pre>"},{"location":"development/building/#building-all-services","title":"Building All Services","text":"<p>To build all Docker images at once:</p> <pre><code>make docker-build-all\n</code></pre> <p>This will build images for: - Frontend - Slots - Roulette - Dice - Blackjack - Scoring - Dashboard - Playwright - k6</p>"},{"location":"development/building/#image-naming-convention","title":"Image Naming Convention","text":"<p>Images follow the pattern: <pre><code>{REGISTRY}-{service}:{IMAGE_TAG}\n</code></pre></p> <p>Example: - <code>hrexed/vegasapp-frontend:0.10</code> - <code>hrexed/vegasapp-slots:0.10</code> - <code>hrexed/vegasapp-scoring:0.10</code></p>"},{"location":"development/building/#pushing-images","title":"Pushing Images","text":""},{"location":"development/building/#push-individual-image","title":"Push Individual Image","text":"<pre><code>make docker-push-frontend\nmake docker-push-slots\n# ... etc\n</code></pre>"},{"location":"development/building/#push-all-images","title":"Push All Images","text":"<pre><code>make docker-push-all\n</code></pre>"},{"location":"development/building/#build-process-details","title":"Build Process Details","text":""},{"location":"development/building/#nodejs-services","title":"Node.js Services","text":"<ol> <li>Copy <code>package.json</code> and install dependencies</li> <li>Copy source code</li> <li>Set up OpenTelemetry and common modules</li> <li>Build final image</li> </ol>"},{"location":"development/building/#python-services","title":"Python Services","text":"<ol> <li>Copy <code>requirements.txt</code> and install dependencies</li> <li>Copy source code</li> <li>Set up OpenTelemetry</li> <li>Build final image</li> </ol>"},{"location":"development/building/#go-services","title":"Go Services","text":"<ol> <li>Copy <code>go.mod</code> and <code>go.sum</code></li> <li>Run <code>go mod tidy</code></li> <li>Copy source files</li> <li>Build binary</li> <li>Create minimal runtime image</li> </ol>"},{"location":"development/building/#java-services","title":"Java Services","text":"<ol> <li>Copy <code>pom.xml</code></li> <li>Run Maven build (<code>mvn clean package</code>)</li> <li>Copy JAR file</li> <li>Create runtime image with JRE</li> </ol>"},{"location":"development/building/#troubleshooting","title":"Troubleshooting","text":""},{"location":"development/building/#build-failures","title":"Build Failures","text":"<p>Issue: Node.js dependencies fail to install <pre><code># Solution: Clear npm cache and rebuild\ndocker system prune -a\nmake docker-build-frontend\n</code></pre></p> <p>Issue: Go build fails <pre><code># Solution: Ensure Go modules are up to date\ncd services/dice/go\ngo mod tidy\n</code></pre></p> <p>Issue: Maven build fails <pre><code># Solution: Clear Maven cache\ncd services/scoring\nmvn clean\nmake docker-build-scoring\n</code></pre></p>"},{"location":"development/building/#platform-specific-issues","title":"Platform-Specific Issues","text":"<p>For ARM64 (Apple Silicon): <pre><code>make docker-build-all PLATFORM=linux/arm64\n</code></pre></p> <p>For multi-platform builds: <pre><code>docker buildx build --platform linux/amd64,linux/arm64 -t image:tag .\n</code></pre></p>"},{"location":"development/building/#build-verification","title":"Build Verification","text":"<p>After building, verify images:</p> <pre><code># List all images\ndocker images | grep vegasapp\n\n# Test an image\ndocker run --rm hrexed/vegasapp-frontend:0.10 node --version\n</code></pre>"},{"location":"development/building/#next-steps","title":"Next Steps","text":"<p>After building images: 1. Push to registry 2. Deploy with Helm 3. Run tests</p> <p>Next: Learn about Docker Images or Deployment.</p>"},{"location":"development/docker/","title":"Docker Images","text":""},{"location":"development/docker/#image-overview","title":"Image Overview","text":"<p>The Vegas Casino project consists of multiple Docker images, each serving a specific purpose in the microservices architecture.</p>"},{"location":"development/docker/#available-images","title":"Available Images","text":""},{"location":"development/docker/#application-images","title":"Application Images","text":"Service Base Image Ports Purpose <code>frontend</code> <code>node:18-alpine</code> 3000 Web UI and API gateway <code>slots</code> <code>node:18-alpine</code> 8081, 50051 Slots game service <code>roulette</code> <code>python:3.11-slim</code> 8082, 50052 Roulette game service <code>dice</code> <code>golang:1.21-alpine</code> 8083, 50053 Dice game service <code>blackjack</code> <code>node:18-alpine</code> 8084, 50054 Blackjack game service <code>scoring</code> <code>eclipse-temurin:17-jre-alpine</code> 8085 Scoring and leaderboard service <code>dashboard</code> <code>node:18-alpine</code> 3001 Analytics dashboard"},{"location":"development/docker/#testing-images","title":"Testing Images","text":"Service Base Image Purpose <code>playwright</code> <code>mcr.microsoft.com/playwright:v1.40.0-focal</code> Browser automation <code>k6</code> <code>grafana/k6:latest</code> Load testing"},{"location":"development/docker/#image-structure","title":"Image Structure","text":""},{"location":"development/docker/#nodejs-services","title":"Node.js Services","text":"<pre><code>FROM node:18-alpine\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install\nCOPY services/{service}/ ./\nCOPY services/common/ ./common/\nCMD [\"node\", \"service-file.js\"]\n</code></pre>"},{"location":"development/docker/#python-services","title":"Python Services","text":"<pre><code>FROM python:3.11-slim\nWORKDIR /app\nCOPY requirements.txt ./\nRUN pip install --no-cache-dir -r requirements.txt\nCOPY services/{service}/ ./\nCMD [\"python\", \"service-file.py\"]\n</code></pre>"},{"location":"development/docker/#go-services","title":"Go Services","text":"<pre><code>FROM golang:1.21-alpine AS builder\nWORKDIR /app\nCOPY go.mod go.sum ./\nRUN go mod download\nCOPY . .\nRUN go build -o service-binary\n\nFROM alpine:latest\nCOPY --from=builder /app/service-binary /service-binary\nCMD [\"/service-binary\"]\n</code></pre>"},{"location":"development/docker/#java-services","title":"Java Services","text":"<pre><code>FROM maven:3.9-eclipse-temurin-17 AS builder\nWORKDIR /app\nCOPY pom.xml ./\nRUN mvn dependency:go-offline\nCOPY src ./src\nRUN mvn clean package -DskipTests\n\nFROM eclipse-temurin:17-jre-alpine\nCOPY --from=builder /app/target/*.jar app.jar\nCMD [\"java\", \"-jar\", \"app.jar\"]\n</code></pre>"},{"location":"development/docker/#environment-variables","title":"Environment Variables","text":"<p>All images support environment variables for configuration:</p>"},{"location":"development/docker/#common-variables","title":"Common Variables","text":"<ul> <li><code>PORT</code>: Service HTTP port</li> <li><code>OTEL_EXPORTER_OTLP_ENDPOINT</code>: OpenTelemetry collector endpoint</li> <li><code>OTEL_EXPORTER_OTLP_PROTOCOL</code>: Protocol (grpc/http)</li> </ul>"},{"location":"development/docker/#service-specific-variables","title":"Service-Specific Variables","text":"<ul> <li><code>REDIS_HOST</code>, <code>REDIS_PORT</code>: Redis connection</li> <li><code>SCORING_SERVICE_URL</code>: Scoring service endpoint</li> <li><code>FLAGD_HOST</code>, <code>FLAGD_PORT</code>: Feature flag service (if not using operator)</li> </ul>"},{"location":"development/docker/#image-tags","title":"Image Tags","text":"<p>Images are tagged with: - Version Tag: From <code>IMAGE_TAG</code> (default: <code>0.10</code>) - Latest Tag: <code>latest</code> (optional)</p> <p>Example: <pre><code>hrexed/vegasapp-frontend:0.10\nhrexed/vegasapp-frontend:latest\n</code></pre></p>"},{"location":"development/docker/#building-images","title":"Building Images","text":"<p>See Building the Project for detailed build instructions.</p>"},{"location":"development/docker/#pushing-images","title":"Pushing Images","text":""},{"location":"development/docker/#to-docker-hub","title":"To Docker Hub","text":"<pre><code># Login first\ndocker login\n\n# Push images\nmake docker-push-all\n</code></pre>"},{"location":"development/docker/#to-private-registry","title":"To Private Registry","text":"<pre><code># Set registry\nexport REGISTRY=your-registry.com/vegasapp\nmake docker-build-all\nmake docker-push-all\n</code></pre>"},{"location":"development/docker/#image-sizes","title":"Image Sizes","text":"<p>Approximate image sizes:</p> Image Size <code>frontend</code> ~150MB <code>slots</code> ~150MB <code>roulette</code> ~200MB <code>dice</code> ~20MB <code>blackjack</code> ~150MB <code>scoring</code> ~200MB <code>dashboard</code> ~150MB <code>playwright</code> ~1.5GB <code>k6</code> ~50MB"},{"location":"development/docker/#multi-stage-builds","title":"Multi-Stage Builds","text":"<p>Several services use multi-stage builds to reduce final image size:</p> <ul> <li>Go Services: Build binary in builder stage, copy to minimal runtime</li> <li>Java Services: Build JAR in Maven stage, copy to JRE-only runtime</li> </ul>"},{"location":"development/docker/#image-security","title":"Image Security","text":"<ul> <li>Base Images: Use official, regularly updated base images</li> <li>Non-Root Users: Services run as non-root when possible</li> <li>Minimal Images: Alpine-based images for smaller attack surface</li> <li>Dependency Scanning: Regularly update dependencies</li> </ul> <p>Next: Learn about Testing or Deployment.</p>"},{"location":"overview/","title":"Project Overview","text":""},{"location":"overview/#what-is-vegas-casino","title":"What is Vegas Casino?","text":"<p>Vegas Casino is a microservices-based casino application designed specifically for observability hackathons. The project provides a realistic, production-like environment where attendees can practice and improve:</p> <ul> <li>Distributed Tracing: End-to-end trace correlation across services</li> <li>Feature Flag Management: OpenFeature integration with flagd</li> <li>Observability Pipelines: OpenTelemetry instrumentation and export</li> <li>Performance Testing: Load testing with k6 and automation with Playwright</li> <li>DevOps Practices: Containerization, Kubernetes deployment, and CI/CD</li> </ul>"},{"location":"overview/#project-goals","title":"Project Goals","text":"<p>The primary goal of this project is to provide a hands-on learning environment for observability practitioners. Attendees will:</p> <ol> <li>Improve Instrumentation: Add and enhance OpenTelemetry spans across services</li> <li>Optimize Pipelines: Configure and tune observability data pipelines</li> <li>Implement Feature Flags: Integrate and manage feature flags using OpenFeature</li> <li>Enhance Testing: Create and run load tests and automation scripts</li> <li>Practice Deployment: Deploy and manage the application in Kubernetes</li> </ol>"},{"location":"overview/#application-structure","title":"Application Structure","text":"<p>The Vegas Casino consists of:</p> <ul> <li>4 Game Services: Slots, Roulette, Dice, and Blackjack</li> <li>Frontend Service: Web UI for players</li> <li>Scoring Service: Leaderboards and game statistics</li> <li>Dashboard Service: Analytics and reporting</li> <li>Supporting Services: Redis, PostgreSQL, OpenTelemetry Collector</li> </ul>"},{"location":"overview/#why-this-project","title":"Why This Project?","text":"<p>This project is designed to simulate real-world challenges:</p> <ul> <li>\u2705 Multiple programming languages (Node.js, Python, Go, Java)</li> <li>\u2705 Different communication patterns (HTTP, gRPC)</li> <li>\u2705 Complex data flows (frontend \u2192 games \u2192 scoring \u2192 database)</li> <li>\u2705 Feature flag integration across services</li> <li>\u2705 Distributed tracing requirements</li> <li>\u2705 Performance and load testing scenarios</li> </ul> <p>Next: Learn about the Hackathon Context or explore the Architecture.</p>"},{"location":"overview/hackathon/","title":"Hackathon Context","text":""},{"location":"overview/hackathon/#purpose","title":"Purpose","text":"<p>The Vegas Casino project is designed for observability hackathons where participants work together to improve instrumentation, observability pipelines, and application monitoring.</p>"},{"location":"overview/hackathon/#hackathon-objectives","title":"Hackathon Objectives","text":"<p>During the hackathon, attendees will:</p>"},{"location":"overview/hackathon/#1-instrumentation-challenges","title":"1. Instrumentation Challenges","text":"<ul> <li>Add Missing Spans: Identify and add OpenTelemetry spans for business logic</li> <li>Improve Trace Correlation: Ensure end-to-end trace propagation across services</li> <li>Enhance Attributes: Add meaningful attributes to spans for better observability</li> <li>Database Instrumentation: Add spans for PostgreSQL and Redis operations</li> </ul>"},{"location":"overview/hackathon/#2-feature-flag-integration","title":"2. Feature Flag Integration","text":"<ul> <li>Implement Feature Flags: Add feature flag evaluation in game services</li> <li>Configure flagd: Set up and configure flagd sidecar injection</li> <li>Test Flag Variations: Experiment with different flag states and targeting</li> </ul>"},{"location":"overview/hackathon/#3-observability-pipeline","title":"3. Observability Pipeline","text":"<ul> <li>Configure Exporters: Set up OpenTelemetry exporters (HTTP/gRPC)</li> <li>Optimize Data Flow: Tune collector configuration for performance</li> <li>Add Custom Metrics: Create custom metrics for business KPIs</li> </ul>"},{"location":"overview/hackathon/#4-testing-and-validation","title":"4. Testing and Validation","text":"<ul> <li>Create Load Tests: Write k6 scripts for different scenarios</li> <li>Automate Testing: Enhance Playwright scripts for comprehensive coverage</li> <li>Validate Traces: Ensure traces are properly connected and complete</li> </ul>"},{"location":"overview/hackathon/#5-deployment-and-operations","title":"5. Deployment and Operations","text":"<ul> <li>Helm Chart Improvements: Enhance Helm charts with better configuration</li> <li>Resource Optimization: Tune resource requests and limits</li> <li>Monitoring Setup: Configure dashboards and alerts</li> </ul>"},{"location":"overview/hackathon/#hackathon-structure","title":"Hackathon Structure","text":""},{"location":"overview/hackathon/#phase-1-exploration-30-minutes","title":"Phase 1: Exploration (30 minutes)","text":"<ul> <li>Understand the architecture</li> <li>Explore existing instrumentation</li> <li>Identify gaps and opportunities</li> </ul>"},{"location":"overview/hackathon/#phase-2-implementation-2-3-hours","title":"Phase 2: Implementation (2-3 hours)","text":"<ul> <li>Work on assigned challenges</li> <li>Implement improvements</li> <li>Test and validate changes</li> </ul>"},{"location":"overview/hackathon/#phase-3-validation-30-minutes","title":"Phase 3: Validation (30 minutes)","text":"<ul> <li>Run load tests</li> <li>Verify trace completeness</li> <li>Review observability data</li> </ul>"},{"location":"overview/hackathon/#phase-4-presentation-30-minutes","title":"Phase 4: Presentation (30 minutes)","text":"<ul> <li>Share improvements made</li> <li>Demonstrate trace flows</li> <li>Discuss learnings</li> </ul>"},{"location":"overview/hackathon/#success-criteria","title":"Success Criteria","text":"<p>A successful hackathon session should result in:</p> <ul> <li>\u2705 Complete Trace Coverage: All user actions produce connected traces</li> <li>\u2705 Feature Flag Integration: Feature flags are evaluated and traced</li> <li>\u2705 Database Instrumentation: All database operations are instrumented</li> <li>\u2705 Load Test Results: k6 tests generate realistic traffic and traces</li> <li>\u2705 End-to-End Visibility: Traces connect from frontend \u2192 games \u2192 scoring \u2192 database</li> </ul>"},{"location":"overview/hackathon/#getting-started","title":"Getting Started","text":"<ol> <li>Clone the Repository: Get the latest code</li> <li>Review Architecture: Understand the system design</li> <li>Build and Deploy: Get the application running</li> <li>Explore Traces: Check existing instrumentation</li> <li>Pick a Challenge: Choose an area to improve</li> <li>Implement and Test: Make changes and validate</li> </ol> <p>Ready to start? Check out the Architecture or Building Guide.</p>"},{"location":"testing/","title":"Testing Overview","text":"<p>The Vegas Casino project includes two types of automated testing:</p> <ol> <li>Playwright - End-to-end browser automation</li> <li>k6 - Load and performance testing</li> </ol> <p>Both testing tools are containerized and can be deployed as Kubernetes Jobs or run locally.</p>"},{"location":"testing/#testing-strategy","title":"Testing Strategy","text":""},{"location":"testing/#playwright-tests","title":"Playwright Tests","text":"<ul> <li>Purpose: Simulate real user journeys</li> <li>Scope: Full application flow from entry to dashboard</li> <li>Execution: Continuous or one-time runs</li> <li>Output: Console logs and traces</li> </ul>"},{"location":"testing/#k6-load-tests","title":"k6 Load Tests","text":"<ul> <li>Purpose: Performance and scalability testing</li> <li>Scope: API endpoints under load</li> <li>Execution: Configurable duration and virtual users</li> <li>Output: Performance metrics and statistics</li> </ul>"},{"location":"testing/#test-coverage","title":"Test Coverage","text":"<pre><code>flowchart TD\n    Start([Test Start]) --&gt; Enter[Enter Casino]\n    Enter --&gt; Deposit1[Deposit Funds]\n    Deposit1 --&gt; PlaySlots[Play Slots&lt;br/&gt;+ Enable Cheats]\n    PlaySlots --&gt; Lobby1[Return to Lobby]\n    Lobby1 --&gt; Deposit2[Deposit Funds]\n    Deposit2 --&gt; PlayRoulette[Play Roulette&lt;br/&gt;+ Enable Cheats]\n    PlayRoulette --&gt; Lobby2[Return to Lobby]\n    Lobby2 --&gt; Deposit3[Deposit Funds]\n    Deposit3 --&gt; PlayDice[Play Dice]\n    PlayDice --&gt; Lobby3[Return to Lobby]\n    Lobby3 --&gt; Deposit4[Deposit Funds]\n    Deposit4 --&gt; PlayBlackjack[Play Blackjack]\n    PlayBlackjack --&gt; ViewDashboard[View Dashboard]\n    ViewDashboard --&gt; CheckStats[Check Statistics]\n    CheckStats --&gt; End([Test Complete])\n\n    style Start fill:#10b981,stroke:#059669,color:#fff\n    style End fill:#10b981,stroke:#059669,color:#fff\n    style PlaySlots fill:#f59e0b,stroke:#d97706,color:#fff\n    style PlayRoulette fill:#f59e0b,stroke:#d97706,color:#fff\n    style ViewDashboard fill:#9333ea,stroke:#7c3aed,color:#fff</code></pre> <p>Both test suites cover:</p> <ul> <li>\u2705 User registration and entry</li> <li>\u2705 Game selection and play</li> <li>\u2705 Feature flag activation</li> <li>\u2705 Deposit functionality</li> <li>\u2705 Dashboard viewing</li> </ul>"},{"location":"testing/#running-tests","title":"Running Tests","text":""},{"location":"testing/#playwright","title":"Playwright","text":"<pre><code># Via Helm (as Job)\nhelm upgrade --install vegas-casino ./helm/vegas-casino \\\n  --set playwright.enabled=true\n\n# Or manually\nkubectl apply -f helm/vegas-casino/templates/playwright-deployment.yaml\n</code></pre>"},{"location":"testing/#k6","title":"k6","text":"<pre><code># Via Helm (as Job)\nhelm upgrade --install vegas-casino ./helm/vegas-casino \\\n  --set k6.enabled=true\n\n# Or manually\nkubectl apply -f helm/vegas-casino/templates/k6-deployment.yaml\n</code></pre> <p>Next: Learn about Playwright Tests or k6 Load Tests.</p>"},{"location":"testing/k6/","title":"k6 Load Tests","text":""},{"location":"testing/k6/#overview","title":"Overview","text":"<p>k6 is a modern load testing tool that generates HTTP traffic to test application performance, scalability, and reliability under various load conditions.</p>"},{"location":"testing/k6/#what-k6-tests-do","title":"What k6 Tests Do","text":"<p>The k6 test script (<code>load-test.js</code>) simulates multiple virtual users performing:</p> <ol> <li>Enter Casino - POST <code>/api/user/init</code></li> <li>Deposit Funds - POST <code>/api/user/topup</code></li> <li>Play Games - POST <code>/api/games/{game}/{action}</code> with feature flags</li> <li>Deposit Again - POST <code>/api/user/topup</code></li> <li>Check Dashboard - GET <code>/api/dashboard/{game}</code></li> </ol>"},{"location":"testing/k6/#test-configuration","title":"Test Configuration","text":""},{"location":"testing/k6/#environment-variables","title":"Environment Variables","text":"Variable Default Description <code>CASINO_URL</code> <code>http://localhost:3000</code> Frontend service URL <code>VUS</code> <code>10</code> Virtual Users (concurrent) <code>DURATION</code> <code>5m</code> Test duration <code>RAMP_UP</code> <code>30s</code> Ramp-up time"},{"location":"testing/k6/#test-stages","title":"Test Stages","text":"<p>k6 uses a staged approach:</p> <ol> <li>Ramp-up: Gradually increase to target VUs</li> <li>Sustained Load: Maintain VUs for duration</li> <li>Ramp-down: Gradually decrease to 0</li> </ol> <p>Example: <pre><code>stages: [\n  { duration: '30s', target: 10 },  // Ramp up to 10 VUs\n  { duration: '5m', target: 10 },   // Stay at 10 VUs\n  { duration: '30s', target: 0 },   // Ramp down\n]\n</code></pre></p>"},{"location":"testing/k6/#metrics","title":"Metrics","text":""},{"location":"testing/k6/#built-in-metrics","title":"Built-in Metrics","text":"<ul> <li><code>http_req_duration</code>: Request duration</li> <li><code>http_req_failed</code>: Failed request rate</li> <li><code>http_reqs</code>: Total requests</li> <li><code>vus</code>: Virtual users</li> <li><code>iterations</code>: Completed iterations</li> </ul>"},{"location":"testing/k6/#custom-metrics","title":"Custom Metrics","text":"<ul> <li><code>errors</code>: Error rate</li> <li><code>success</code>: Success rate</li> </ul>"},{"location":"testing/k6/#thresholds","title":"Thresholds","text":"<p>Default thresholds: - 95% of requests &lt; 2 seconds - Error rate &lt; 10% - Success rate &gt; 90%</p>"},{"location":"testing/k6/#running-k6-tests","title":"Running k6 Tests","text":""},{"location":"testing/k6/#via-helm","title":"Via Helm","text":"<pre><code># Enable and configure\nhelm upgrade --install vegas-casino ./helm/vegas-casino \\\n  --set k6.enabled=true \\\n  --set k6.vus=20 \\\n  --set k6.duration=10m \\\n  --set k6.rampUp=1m\n</code></pre>"},{"location":"testing/k6/#via-kubernetes-job","title":"Via Kubernetes Job","text":"<pre><code># Create job manually\nkubectl create job k6-load-test \\\n  --image=hrexed/vegasapp-k6:0.10 \\\n  --env=\"CASINO_URL=http://vegas-casino-frontend:3000\" \\\n  --env=\"VUS=20\" \\\n  --env=\"DURATION=10m\"\n</code></pre>"},{"location":"testing/k6/#locally","title":"Locally","text":"<pre><code># Install k6\nbrew install k6  # macOS\n# or download from https://k6.io/docs/getting-started/installation/\n\n# Run test\nk6 run services/k6/load-test.js \\\n  --env CASINO_URL=http://localhost:3000 \\\n  --env VUS=10 \\\n  --env DURATION=5m\n</code></pre>"},{"location":"testing/k6/#via-docker","title":"Via Docker","text":"<pre><code># Build image\nmake docker-build-k6\n\n# Run locally\ndocker run --rm \\\n  -e CASINO_URL=http://localhost:3000 \\\n  -e VUS=20 \\\n  -e DURATION=10m \\\n  hrexed/vegasapp-k6:0.10\n</code></pre>"},{"location":"testing/k6/#test-scenarios","title":"Test Scenarios","text":""},{"location":"testing/k6/#light-load","title":"Light Load","text":"<pre><code>k6:\n  vus: \"5\"\n  duration: \"2m\"\n  rampUp: \"30s\"\n</code></pre>"},{"location":"testing/k6/#medium-load","title":"Medium Load","text":"<pre><code>k6:\n  vus: \"20\"\n  duration: \"10m\"\n  rampUp: \"1m\"\n</code></pre>"},{"location":"testing/k6/#heavy-load","title":"Heavy Load","text":"<pre><code>k6:\n  vus: \"50\"\n  duration: \"30m\"\n  rampUp: \"5m\"\n</code></pre>"},{"location":"testing/k6/#output","title":"Output","text":"<p>k6 provides detailed output:</p> <pre><code>     \u2713 entered casino successfully\n     \u2713 deposit successful\n     \u2713 balance updated\n     \u2713 slots game played\n     \u2713 game response valid\n     \u2713 dashboard loaded\n     \u2713 dashboard has data\n\n     checks.........................: 100.00% \u2713 350    \u2717 0\n     data_received..................: 2.1 MB  7.0 kB/s\n     data_sent......................: 450 kB  1.5 kB/s\n     http_req_duration..............: avg=245ms min=120ms med=230ms max=890ms p(95)=450ms\n     http_req_failed................: 0.00%   \u2713 0      \u2717 350\n     http_reqs......................: 350    1.166667/s\n     iterations.....................: 50     0.166667/s\n     vus............................: 10     min=10    max=10\n</code></pre>"},{"location":"testing/k6/#interpreting-results","title":"Interpreting Results","text":""},{"location":"testing/k6/#good-performance","title":"Good Performance","text":"<ul> <li><code>http_req_duration p(95) &lt; 2000ms</code></li> <li><code>http_req_failed &lt; 0.1</code></li> <li><code>errors &lt; 0.1</code></li> <li><code>success &gt; 0.9</code></li> </ul>"},{"location":"testing/k6/#performance-issues","title":"Performance Issues","text":"<ul> <li>High <code>http_req_duration</code> \u2192 Service overload</li> <li>High <code>http_req_failed</code> \u2192 Service errors</li> <li>Increasing <code>vus</code> \u2192 Resource constraints</li> </ul>"},{"location":"testing/k6/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"testing/k6/#custom-test-scenarios","title":"Custom Test Scenarios","text":"<p>Edit <code>load-test.js</code> to add custom scenarios:</p> <pre><code>export const options = {\n  scenarios: {\n    spike: {\n      executor: 'ramping-vus',\n      startVUs: 0,\n      stages: [\n        { duration: '10s', target: 100 },\n        { duration: '1m', target: 100 },\n        { duration: '10s', target: 0 },\n      ],\n    },\n  },\n};\n</code></pre>"},{"location":"testing/k6/#custom-metrics_1","title":"Custom Metrics","text":"<p>Add custom metrics:</p> <pre><code>import { Trend, Counter } from 'k6/metrics';\n\nconst gamePlayDuration = new Trend('game_play_duration');\nconst depositsCount = new Counter('deposits_total');\n</code></pre>"},{"location":"testing/k6/#troubleshooting","title":"Troubleshooting","text":""},{"location":"testing/k6/#high-error-rate","title":"High Error Rate","text":"<ul> <li>Check service availability</li> <li>Verify CASINO_URL is correct</li> <li>Review service logs</li> <li>Check resource limits</li> </ul>"},{"location":"testing/k6/#slow-response-times","title":"Slow Response Times","text":"<ul> <li>Increase service replicas</li> <li>Check database performance</li> <li>Review Redis connectivity</li> <li>Monitor resource usage</li> </ul>"},{"location":"testing/k6/#test-fails-to-start","title":"Test Fails to Start","text":"<ul> <li>Verify CASINO_URL is accessible</li> <li>Check k6 image is built</li> <li>Review job logs: <code>kubectl logs job/k6-load-test</code></li> </ul> <p>Next: Learn about Deployment or return to Testing Overview.</p>"},{"location":"testing/playwright/","title":"Playwright Tests","text":""},{"location":"testing/playwright/#overview","title":"Overview","text":"<p>Playwright automation simulates complete user journeys through the Vegas Casino application. It uses a headless browser to interact with the web UI, just like a real user would.</p>"},{"location":"testing/playwright/#what-playwright-tests-do","title":"What Playwright Tests Do","text":"<p>The Playwright test script (<code>simulate-user.js</code>) performs the following actions:</p> <ol> <li>Enter Casino</li> <li>Navigate to frontend</li> <li>Fill in user information (name, email, company)</li> <li> <p>Submit entry form</p> </li> <li> <p>Play Each Game</p> </li> <li>Navigate to slots, roulette, dice, and blackjack</li> <li>Place bets</li> <li>Enable feature flags (cheats)</li> <li> <p>Interact with game controls</p> </li> <li> <p>Deposit Funds</p> </li> <li>Click deposit button between games</li> <li> <p>Verify balance updates</p> </li> <li> <p>View Dashboard</p> </li> <li>Navigate to dashboard</li> <li>View stats for each game</li> <li>Verify data display</li> </ol>"},{"location":"testing/playwright/#configuration","title":"Configuration","text":""},{"location":"testing/playwright/#environment-variables","title":"Environment Variables","text":"Variable Default Description <code>CASINO_URL</code> <code>http://localhost:3000</code> Frontend service URL <code>USER_NAME</code> <code>PlaywrightUser_{timestamp}</code> Test user name <code>USER_EMAIL</code> <code>{username}@example.com</code> Test user email <code>USER_COMPANY</code> <code>Dynatrace</code> Test user company <code>DELAY_BETWEEN_ACTIONS</code> <code>2000</code> Milliseconds between actions <code>DELAY_BETWEEN_GAMES</code> <code>5000</code> Milliseconds between games <code>RUN_CONTINUOUSLY</code> <code>false</code> Run in continuous loop <code>ITERATIONS</code> <code>1</code> Number of iterations"},{"location":"testing/playwright/#helm-configuration","title":"Helm Configuration","text":"<pre><code>playwright:\n  enabled: true\n  casinoUrl: \"\"  # Auto-detect if empty\n  userName: \"PlaywrightUser\"\n  userEmail: \"playwright@example.com\"\n  userCompany: \"Dynatrace\"\n  delayBetweenActions: \"2000\"\n  delayBetweenGames: \"5000\"\n  runContinuously: \"false\"\n  iterations: \"1\"\n</code></pre>"},{"location":"testing/playwright/#running-playwright-tests","title":"Running Playwright Tests","text":""},{"location":"testing/playwright/#via-helm","title":"Via Helm","text":"<pre><code># Enable and deploy\nhelm upgrade --install vegas-casino ./helm/vegas-casino \\\n  --set playwright.enabled=true \\\n  --set playwright.runContinuously=false \\\n  --set playwright.iterations=5\n</code></pre>"},{"location":"testing/playwright/#via-kubernetes-job","title":"Via Kubernetes Job","text":"<pre><code># Create job manually\nkubectl create job playwright-test \\\n  --from=job/vegas-casino-playwright-1 \\\n  --dry-run=client -o yaml | kubectl apply -f -\n</code></pre>"},{"location":"testing/playwright/#locally","title":"Locally","text":"<pre><code># Build image\nmake docker-build-playwright\n\n# Run locally\ndocker run --rm \\\n  -e CASINO_URL=http://localhost:3000 \\\n  -e USER_NAME=TestUser \\\n  -e ITERATIONS=1 \\\n  hrexed/vegasapp-playwright:0.10\n</code></pre>"},{"location":"testing/playwright/#test-flow","title":"Test Flow","text":"<pre><code>1. Enter Casino\n   \u2193\n2. Deposit Funds\n   \u2193\n3. Play Slots (with cheats enabled)\n   \u2193\n4. Return to Lobby\n   \u2193\n5. Deposit Funds\n   \u2193\n6. Play Roulette (with cheats enabled)\n   \u2193\n7. Return to Lobby\n   \u2193\n8. Deposit Funds\n   \u2193\n9. Play Dice\n   \u2193\n10. Return to Lobby\n    \u2193\n11. Deposit Funds\n    \u2193\n12. Play Blackjack\n    \u2193\n13. View Dashboard (all games)\n    \u2193\n14. View Dashboard (per game)\n</code></pre>"},{"location":"testing/playwright/#output","title":"Output","text":"<p>Playwright tests output: - Console logs for each action - Success/failure indicators - Error messages if actions fail - Trace information (if configured)</p> <p>Example output: <pre><code>\ud83c\udfb0 [PlaywrightUser] Entering casino...\n\u2705 [PlaywrightUser] Successfully entered casino\n\ud83d\udcb0 [PlaywrightUser] Depositing funds...\n\u2705 [PlaywrightUser] Deposited funds\n\ud83c\udfb0 [PlaywrightUser] Playing slots...\n\ud83d\udd27 [PlaywrightUser] Enabled cheats for slots\n\u2705 [PlaywrightUser] Finished playing slots\n</code></pre></p>"},{"location":"testing/playwright/#continuous-testing","title":"Continuous Testing","text":"<p>To run Playwright continuously:</p> <pre><code>playwright:\n  runContinuously: \"true\"\n</code></pre> <p>This will run the test in an infinite loop, generating continuous traffic.</p>"},{"location":"testing/playwright/#troubleshooting","title":"Troubleshooting","text":""},{"location":"testing/playwright/#browser-launch-fails","title":"Browser Launch Fails","text":"<ul> <li>Ensure pod has proper security context (SYS_ADMIN capability)</li> <li>Check resource limits (Playwright needs memory)</li> </ul>"},{"location":"testing/playwright/#page-load-timeouts","title":"Page Load Timeouts","text":"<ul> <li>Increase <code>DELAY_BETWEEN_ACTIONS</code></li> <li>Check frontend service availability</li> <li>Verify CASINO_URL is correct</li> </ul>"},{"location":"testing/playwright/#element-not-found","title":"Element Not Found","text":"<ul> <li>Check if UI has changed</li> <li>Verify selectors in <code>simulate-user.js</code></li> <li>Check browser console logs</li> </ul> <p>Next: Learn about k6 Load Tests or Deployment.</p>"}]}